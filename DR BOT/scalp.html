<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediScan AI - Hair Health Diagnostic Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
    <script src="https://unpkg.com/filepond@^4/dist/filepond.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://unpkg.com/filepond@^4/dist/filepond.css" rel="stylesheet" />
    <link rel="stylesheet" href="scalp.css">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <script src="scalp.js"></script>

</head>

<body class="bg-gray-50 font-sans transition-colors duration-300" id="app">
    <!-- Header Section -->
    <header class="bg-white shadow-sm border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M10 2L3 7v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V7l-7-5zM10 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900 dark:text-white">HairDerm AI</h1>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Hair Health Diagnostic Platform</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full pulse" id="aiStatus"></div>
                        <span class="text-sm font-medium text-green-600" id="aiStatusText">AI Ready</span>
                    </div>
                    <button onclick="toggleDarkMode()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                        </svg>
                    </button>
                    <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-3 space-y-8">
                <!-- Hero Section -->
                <div class="gradient-bg rounded-2xl p-8 text-white">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h2 class="text-4xl font-bold mb-4">AI-Powered Hair Health Analysis</h2>
                            <p class="text-xl opacity-90 mb-6">Advanced machine learning and medical AI for
                                comprehensive scalp and hair condition assessment.</p>
                            <div class="flex space-x-4">
                                <button onclick="scrollToUpload()"
                                    class="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                                    Start Analysis
                                </button>
                                <button onclick="showHistory()"
                                    class="border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors">
                                    View History
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-center">
                            <div class="w-64 h-64 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center">
                                <canvas id="heroVisualization" width="200" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upload Section -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 card-shadow" id="uploadSection">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Upload Hair & Scalp Image</h3>

                    <!-- FilePond Upload -->
                    <div class="mb-6">
                        <input type="file" id="imageUpload" accept="image/*" />
                    </div>

                    <!-- Camera Capture -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <button onclick="startCamera()"
                                class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z" />
                                </svg>
                                <span>Use Camera</span>
                            </button>
                        </div>
                        <div>
                            <button onclick="showExampleImages()"
                                class="w-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                                View Example Images
                            </button>
                        </div>
                    </div>

                    <!-- Camera Modal -->
                    <div id="cameraModal"
                        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-bold text-gray-900 dark:text-white">Capture Image</h4>
                                <button onclick="stopCamera()" class="text-gray-500 hover:text-gray-700">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" />
                                        </path>
                                    </svg>
                                </button>
                            </div>
                            <video id="cameraVideo" class="w-full rounded-lg mb-4" autoplay></video>
                            <canvas id="cameraCanvas" class="hidden"></canvas>
                            <button onclick="captureImage()"
                                class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                                Capture Photo
                            </button>
                        </div>
                    </div>

                    <!-- Example Images Modal -->
                    <div id="exampleModal"
                        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
                        <div
                            class="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="flex justify-between items-center mb-6">
                                <h4 class="text-xl font-bold text-gray-900 dark:text-white">📸 Photography Guide &
                                    Examples</h4>
                                <button onclick="closeExampleModal()" class="text-gray-500 hover:text-gray-700">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" />
                                        </path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Good vs Bad Examples -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div class="bg-green-50 dark:bg-green-900 rounded-lg p-4">
                                    <h5 class="text-lg font-semibold text-green-800 dark:text-green-200 mb-3">✅ Good
                                        Examples</h5>
                                    <div class="space-y-4">
                                        <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-green-200">
                                            <div
                                                class="w-full h-32 bg-gradient-to-br from-orange-200 to-orange-300 rounded-lg mb-2 flex items-center justify-center">
                                                <div class="text-center">
                                                    <div
                                                        class="w-16 h-16 bg-orange-400 rounded-full mx-auto mb-2 relative">
                                                        <div
                                                            class="absolute top-2 left-2 w-3 h-3 bg-orange-600 rounded-full">
                                                        </div>
                                                        <div
                                                            class="absolute top-3 right-3 w-2 h-2 bg-orange-600 rounded-full">
                                                        </div>
                                                        <div
                                                            class="absolute bottom-2 left-4 w-2 h-2 bg-orange-600 rounded-full">
                                                        </div>
                                                    </div>
                                                    <p class="text-xs text-orange-700">Crown View</p>
                                                </div>
                                            </div>
                                            <p class="text-sm text-green-700 dark:text-green-300">Clear scalp
                                                visibility, good lighting, focused image</p>
                                        </div>

                                        <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-green-200">
                                            <div
                                                class="w-full h-32 bg-gradient-to-r from-yellow-200 to-orange-200 rounded-lg mb-2 flex items-center justify-center">
                                                <div class="text-center">
                                                    <div
                                                        class="w-20 h-12 bg-orange-300 rounded-lg mx-auto mb-2 relative">
                                                        <div
                                                            class="absolute top-1 left-1 w-full h-2 bg-orange-500 rounded">
                                                        </div>
                                                        <div
                                                            class="absolute top-4 left-1 w-4/5 h-2 bg-orange-500 rounded">
                                                        </div>
                                                        <div
                                                            class="absolute top-7 left-1 w-3/4 h-2 bg-orange-500 rounded">
                                                        </div>
                                                    </div>
                                                    <p class="text-xs text-orange-700">Hairline View</p>
                                                </div>
                                            </div>
                                            <p class="text-sm text-green-700 dark:text-green-300">Shows hairline
                                                pattern, natural lighting, proper distance</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-red-50 dark:bg-red-900 rounded-lg p-4">
                                    <h5 class="text-lg font-semibold text-red-800 dark:text-red-200 mb-3">❌ Poor
                                        Examples</h5>
                                    <div class="space-y-4">
                                        <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-red-200">
                                            <div
                                                class="w-full h-32 bg-gradient-to-br from-gray-800 to-black rounded-lg mb-2 flex items-center justify-center">
                                                <div class="text-white text-xs">Too Dark</div>
                                            </div>
                                            <p class="text-sm text-red-700 dark:text-red-300">Poor lighting, shadows,
                                                can't see scalp details</p>
                                        </div>

                                        <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-red-200">
                                            <div
                                                class="w-full h-32 bg-gradient-to-br from-gray-300 to-gray-400 rounded-lg mb-2 flex items-center justify-center relative">
                                                <div class="absolute inset-0 bg-white opacity-70 rounded-lg"></div>
                                                <div class="text-gray-600 text-xs z-10">Overexposed</div>
                                            </div>
                                            <p class="text-sm text-red-700 dark:text-red-300">Too bright, washed out, no
                                                texture visible</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Photography Tips -->
                            <div class="bg-blue-50 dark:bg-blue-900 rounded-lg p-4 mb-6">
                                <h5 class="text-lg font-semibold text-blue-800 dark:text-blue-200 mb-3">📋 Photography
                                    Tips</h5>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h6 class="font-semibold text-blue-700 dark:text-blue-300 mb-2">Lighting</h6>
                                        <ul class="text-sm text-blue-600 dark:text-blue-400 space-y-1">
                                            <li>• Use natural daylight when possible</li>
                                            <li>• Avoid direct flash or harsh shadows</li>
                                            <li>• Ensure even lighting across scalp</li>
                                            <li>• Take photos near a window</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h6 class="font-semibold text-blue-700 dark:text-blue-300 mb-2">Positioning</h6>
                                        <ul class="text-sm text-blue-600 dark:text-blue-400 space-y-1">
                                            <li>• Hold camera 6-12 inches away</li>
                                            <li>• Keep camera steady and focused</li>
                                            <li>• Include both hair and scalp</li>
                                            <li>• Take multiple angles if needed</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Areas to Photograph -->
                            <div class="bg-purple-50 dark:bg-purple-900 rounded-lg p-4">
                                <h5 class="text-lg font-semibold text-purple-800 dark:text-purple-200 mb-3">🎯 Key Areas
                                    to Photograph</h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="text-center">
                                        <div
                                            class="w-16 h-16 bg-purple-200 rounded-full mx-auto mb-2 flex items-center justify-center">
                                            <div class="w-8 h-8 bg-purple-500 rounded-full"></div>
                                        </div>
                                        <p class="text-sm text-purple-700 dark:text-purple-300">Crown</p>
                                    </div>
                                    <div class="text-center">
                                        <div
                                            class="w-16 h-16 bg-purple-200 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <div class="w-12 h-4 bg-purple-500 rounded-t-lg"></div>
                                        </div>
                                        <p class="text-sm text-purple-700 dark:text-purple-300">Hairline</p>
                                    </div>
                                    <div class="text-center">
                                        <div
                                            class="w-16 h-16 bg-purple-200 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <div class="w-4 h-12 bg-purple-500 rounded-l-lg"></div>
                                        </div>
                                        <p class="text-sm text-purple-700 dark:text-purple-300">Temples</p>
                                    </div>
                                    <div class="text-center">
                                        <div
                                            class="w-16 h-16 bg-purple-200 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <div class="w-12 h-8 bg-purple-500 rounded"></div>
                                        </div>
                                        <p class="text-sm text-purple-700 dark:text-purple-300">Part Line</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Image Validation Results -->
                    <div id="validationResults" class="hidden mb-6">
                        <div class="bg-blue-50 dark:bg-blue-900 rounded-lg p-4">
                            <h5 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">🔍 Image Validation Results
                            </h5>
                            <div id="validationContent" class="text-sm text-blue-800 dark:text-blue-200"></div>
                        </div>
                    </div>

                    <!-- Best Practices -->
                    <div class="bg-blue-50 dark:bg-blue-900 rounded-lg p-4">
                        <h5 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">📋 Best Practices for Accurate
                            Analysis</h5>
                        <ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1">
                            <li>• Ensure good lighting and clear image quality</li>
                            <li>• Include both hair and scalp in the frame (minimum 50% coverage)</li>
                            <li>• Avoid shadows, reflections, or blurry images</li>
                            <li>• Take multiple angles if possible</li>
                            <li>• Maximum file size: 10MB (JPG/PNG format)</li>
                        </ul>
                    </div>
                </div>

                <!-- Analysis Process -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 card-shadow hidden" id="analysisSection">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">AI Analysis in Progress</h3>
                    <div class="space-y-6">
                        <div class="bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
                            <div class="bg-gradient-to-r from-blue-600 to-green-500 h-full progress-animate"
                                id="progressBar"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4" id="analysisSteps">
                            <!-- Steps will be populated dynamically -->
                        </div>
                        <div class="text-center">
                            <div class="inline-flex items-center space-x-2">
                                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center spin">
                                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10 2L3 7v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V7l-7-5z" />
                                    </svg>
                                </div>
                                <span class="text-gray-600 dark:text-gray-400" id="analysisStatus">Initializing
                                    analysis...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Symptom Checker -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 card-shadow hidden" id="symptomSection">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Symptom Assessment</h3>
                    <form id="symptomForm">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Hair Loss
                                    Symptoms</h4>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="thinning"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Thinning hair</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="bald_patches"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Bald patches</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="receding"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Receding hairline</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="shedding"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Excessive shedding</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Scalp Sensations
                                </h4>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="itching"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Itching</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="burning"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Burning sensation</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="tenderness"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Tenderness</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" name="symptoms" value="tightness"
                                            class="w-4 h-4 text-blue-600 rounded">
                                        <span class="text-gray-700 dark:text-gray-300">Tightness</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Duration</label>
                                <select name="duration"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white">
                                    <option value="<1month">Less than 1 month</option>
                                    <option value="1-3months">1-3 months</option>
                                    <option value="3-6months">3-6 months</option>
                                    <option value=">6months">More than 6 months</option>
                                </select>
                            </div>
                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Severity</label>
                                <select name="severity"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white">
                                    <option value="mild">Mild</option>
                                    <option value="moderate">Moderate</option>
                                    <option value="severe">Severe</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Age
                                    Range</label>
                                <select name="age"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white">
                                    <option value="18-25">18-25</option>
                                    <option value="26-35">26-35</option>
                                    <option value="36-45">36-45</option>
                                    <option value="46-55">46-55</option>
                                    <option value="55+">55+</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex space-x-4">
                            <button type="submit"
                                class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                                Analyze Symptoms
                            </button>
                            <button type="button" onclick="skipSymptoms()"
                                class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                                Skip This Step
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Results Display -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 card-shadow hidden" id="resultsSection">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Diagnostic Results</h3>

                    <!-- Primary Diagnosis -->
                    <div class="bg-blue-50 dark:bg-blue-900 rounded-xl p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-xl font-bold text-blue-900 dark:text-blue-100">Primary Diagnosis</h4>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-blue-700 dark:text-blue-300">Confidence:</span>
                                <div class="w-24 bg-blue-200 dark:bg-blue-800 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" id="confidenceBar"></div>
                                </div>
                                <span class="text-sm font-semibold text-blue-700 dark:text-blue-300"
                                    id="confidenceText">--</span>
                            </div>
                        </div>
                        <h5 class="text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2" id="primaryDiagnosis">
                            Analyzing...</h5>
                        <p class="text-blue-700 dark:text-blue-300" id="diagnosisDescription">Please wait while we
                            analyze your condition...</p>
                    </div>

                    <!-- Severity & Metrics -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6" id="metricsGrid">
                        <!-- Metrics will be populated dynamically -->
                    </div>

                    <!-- Treatment Recommendations -->
                    <div class="bg-green-50 dark:bg-green-900 rounded-xl p-6 mb-6">
                        <h4 class="text-lg font-bold text-green-900 dark:text-green-100 mb-4">Treatment Recommendations
                        </h4>
                        <div id="treatmentPlan" class="space-y-4">
                            <!-- Treatment steps will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Data Visualization -->
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6 mb-6">
                        <h4 class="text-lg font-bold text-gray-900 dark:text-gray-100 mb-4">Analysis Breakdown</h4>
                        <canvas id="resultsChart" width="400" height="200"></canvas>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-wrap gap-4">
                        <button onclick="generatePDFReport()"
                            class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" />
                            </svg>
                            <span>Download Report</span>
                        </button>
                        <button onclick="shareResults()"
                            class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                            </svg>
                            <span>Share Results</span>
                        </button>
                        <button onclick="consultSpecialist()"
                            class="bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z" />
                            </svg>
                            <span>Consult Specialist</span>
                        </button>
                        <button onclick="saveToHistory()"
                            class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293z" />
                            </svg>
                            <span>Save to History</span>
                        </button>
                    </div>
                </div>

                <!-- Error Display -->
                <div class="bg-red-50 dark:bg-red-900 rounded-xl p-6 hidden" id="errorSection">
                    <div class="flex items-center space-x-3">
                        <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" />
                        </svg>
                        <div>
                            <h4 class="text-lg font-bold text-red-900 dark:text-red-100">Analysis Error</h4>
                            <p class="text-red-700 dark:text-red-300" id="errorMessage">An error occurred during
                                analysis.</p>
                        </div>
                    </div>
                    <button onclick="retryAnalysis()"
                        class="mt-4 bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors">
                        Retry Analysis
                    </button>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="lg:col-span-1 space-y-6">
                <!-- AI System Status -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 card-shadow">
                    <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-4">AI System Status</h4>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Model Accuracy</span>
                            <span class="text-sm font-semibold text-green-600" id="modelAccuracy">94.2%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Conditions DB</span>
                            <span class="text-sm font-semibold text-blue-600" id="conditionsCount">47+</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Avg Response</span>
                            <span class="text-sm font-semibold text-purple-600" id="avgResponse">2.3s</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">API Status</span>
                            <span class="text-sm font-semibold text-green-600" id="apiStatus">Online</span>
                        </div>
                    </div>
                </div>

                <!-- Detectable Conditions -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 card-shadow">
                    <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Detectable Conditions</h4>
                    <div class="space-y-3" id="conditionsList">
                        <!-- Conditions will be populated dynamically -->
                    </div>
                    <button onclick="showAllConditions()"
                        class="w-full mt-4 text-blue-600 dark:text-blue-400 text-sm font-medium hover:text-blue-700 dark:hover:text-blue-300">
                        View All Conditions →
                    </button>
                </div>

                <!-- Session History -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 card-shadow">
                    <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Recent Analyses</h4>
                    <div class="space-y-3" id="historyList">
                        <p class="text-sm text-gray-500 dark:text-gray-400">No previous analyses</p>
                    </div>
                    <button onclick="clearHistory()"
                        class="w-full mt-4 text-red-600 dark:text-red-400 text-sm font-medium hover:text-red-700 dark:hover:text-red-300">
                        Clear History
                    </button>
                </div>

                <!-- AI Doctor Chatbot - Enhanced -->
                <div
                    class="bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 card-shadow border border-blue-100 dark:border-gray-700">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <div
                                class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg">
                                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path
                                        d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-gray-900 dark:text-white">🤖 Dr. AI Assistant</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Hair Health Specialist</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 bg-green-100 dark:bg-green-900 px-3 py-1 rounded-full">
                            <div class="w-3 h-3 bg-green-500 rounded-full pulse"></div>
                            <span class="text-xs text-green-700 dark:text-green-300 font-semibold">Online</span>
                        </div>
                    </div>

                    <!-- Quick Symptom Selector -->
                    <div class="mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900 dark:to-purple-900 rounded-xl border border-blue-200 dark:border-blue-700"
                        id="symptomSelector">
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="currentColor"
                                viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" />
                            </svg>
                            <h5 class="text-sm font-bold text-blue-800 dark:text-blue-200">Quick Symptom Assessment</h5>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="selectSymptom('Hair thinning')"
                                class="text-xs bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg border border-blue-200 dark:border-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 hover:shadow-md transition-all duration-200 font-medium">
                                🧑‍🦲 Hair thinning
                            </button>
                            <button onclick="selectSymptom('Scalp itching')"
                                class="text-xs bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg border border-blue-200 dark:border-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 hover:shadow-md transition-all duration-200 font-medium">
                                🤏 Scalp itching
                            </button>
                            <button onclick="selectSymptom('Hair loss patches')"
                                class="text-xs bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg border border-blue-200 dark:border-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 hover:shadow-md transition-all duration-200 font-medium">
                                🔴 Hair loss patches
                            </button>
                            <button onclick="selectSymptom('Dandruff')"
                                class="text-xs bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg border border-blue-200 dark:border-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 hover:shadow-md transition-all duration-200 font-medium">
                                ❄️ Dandruff
                            </button>
                            <button onclick="selectSymptom('Scalp pain')"
                                class="text-xs bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg border border-blue-200 dark:border-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 hover:shadow-md transition-all duration-200 font-medium">
                                😣 Scalp pain
                            </button>
                            <button onclick="selectSymptom('Oily scalp')"
                                class="text-xs bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg border border-blue-200 dark:border-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 hover:shadow-md transition-all duration-200 font-medium">
                                💧 Oily scalp
                            </button>
                        </div>
                    </div>

                    <!-- Chat Messages - Larger with Better Design -->
                    <div class="bg-gradient-to-b from-gray-50 to-white dark:from-gray-700 dark:to-gray-800 rounded-xl h-96 p-4 mb-6 overflow-y-auto border border-gray-200 dark:border-gray-600 shadow-inner"
                        id="chatMessages">
                        <div class="flex items-start space-x-3 mb-4">
                            <div
                                class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg">
                                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path
                                        d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z" />
                                </svg>
                            </div>
                            <div
                                class="bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900 dark:to-purple-900 rounded-xl p-4 max-w-sm shadow-md border border-blue-200 dark:border-blue-700">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="text-sm font-bold text-blue-800 dark:text-blue-200">Dr. AI</span>
                                    <span
                                        class="px-2 py-0.5 bg-blue-200 dark:bg-blue-800 text-blue-700 dark:text-blue-300 text-xs rounded-full font-medium">Specialist</span>
                                </div>
                                <p class="text-sm text-blue-800 dark:text-blue-200 mb-2">👋 Welcome! I'm your AI hair
                                    health specialist with advanced diagnostic capabilities.</p>
                                <div class="bg-white dark:bg-gray-800 rounded-lg p-3 mb-2">
                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1">🩺 I can help
                                        with:</p>
                                    <ul class="text-xs text-gray-600 dark:text-gray-400 space-y-0.5">
                                        <li>• Advanced symptom analysis</li>
                                        <li>• Personalized treatment plans</li>
                                        <li>• Professional referrals</li>
                                        <li>• Hair care guidance</li>
                                    </ul>
                                </div>
                                <p class="text-sm text-blue-800 dark:text-blue-200">Select a symptom above or describe
                                    your concerns!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Input Area -->
                    <div class="space-y-4">
                        <div class="flex space-x-3">
                            <div class="flex-1 relative">
                                <input type="text" id="chatInput"
                                    placeholder="Describe your symptoms or ask about hair health..."
                                    class="w-full p-4 pr-12 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white shadow-sm transition-all duration-200"
                                    onkeypress="handleChatKeyPress(event)">
                                <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                    <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" />
                                    </svg>
                                </div>
                            </div>
                            <button onclick="sendChatMessage()"
                                class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-4 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path
                                        d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                                </svg>
                            </button>
                        </div>

                        <!-- Quick Actions with Better Design -->
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3">
                            <p class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2">💡 Quick Questions:
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <button onclick="askQuickQuestion('What causes hair loss?')"
                                    class="text-xs bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-600 dark:to-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-full hover:from-blue-100 hover:to-blue-200 dark:hover:from-blue-800 dark:hover:to-blue-700 hover:text-blue-700 dark:hover:text-blue-300 transition-all duration-200 font-medium shadow-sm">
                                    🔍 Common causes
                                </button>
                                <button onclick="askQuickQuestion('How to prevent hair loss?')"
                                    class="text-xs bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-600 dark:to-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-full hover:from-green-100 hover:to-green-200 dark:hover:from-green-800 dark:hover:to-green-700 hover:text-green-700 dark:hover:text-green-300 transition-all duration-200 font-medium shadow-sm">
                                    🛡️ Prevention tips
                                </button>
                                <button onclick="askQuickQuestion('Best treatments available?')"
                                    class="text-xs bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-600 dark:to-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-full hover:from-purple-100 hover:to-purple-200 dark:hover:from-purple-800 dark:hover:to-purple-700 hover:text-purple-700 dark:hover:text-purple-300 transition-all duration-200 font-medium shadow-sm">
                                    💊 Treatments
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Medical Disclaimer -->
                <div
                    class="bg-yellow-50 dark:bg-yellow-900 rounded-2xl p-6 border border-yellow-200 dark:border-yellow-700">
                    <h4 class="text-sm font-bold text-yellow-800 dark:text-yellow-200 mb-2">⚠️ Medical Disclaimer</h4>
                    <p class="text-xs text-yellow-700 dark:text-yellow-300">This AI analysis is for informational
                        purposes only and should not replace professional medical advice. Always consult with a
                        qualified healthcare provider for proper diagnosis and treatment. Data is processed securely and
                        not stored permanently.</p>
                </div>
            </div>
        </div>
    </div>


    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'96ed4b6f51da4e25',t:'MTc1NTE0MTM5OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>