<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Face & Skin Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.7.13/dist/face-api.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="hyd.css">
    <script src="hyd.js"></script>

</head>

<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="relative inline-flex items-center justify-center w-20 h-20 mb-8">
                <div
                    class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur-lg opacity-60 animate-pulse">
                </div>
                <div class="relative bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-4 shadow-2xl">
                    <i class="fa-solid fa-user-doctor"
                        style="font-size: 40px; color: white; display: inline-block; vertical-align: middle;"></i>
                </div>
            </div>
            <h1
                class="text-5xl font-bold bg-gradient-to-r from-white via-blue-100 to-purple-100 bg-clip-text text-transparent mb-4 tracking-tight">
                AI Face & Skin Analysis
            </h1>
            <p class="text-xl text-white/80 max-w-3xl mx-auto leading-relaxed font-medium">
                Advanced real-time facial analysis with personalized skin health insights and wellness recommendations
            </p>
            <div class="mt-6 flex justify-center">
                <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-full px-6 py-2">
                    <span class="text-white/90 text-sm font-medium">✨ Powered by Advanced DOC BOT</span>
                </div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="text-center py-16">
            <div class="card max-w-2xl mx-auto p-12">
                <div class="loading-spinner mx-auto mb-8"></div>
                <h3 class="text-2xl font-bold text-gray-800 mb-6">
                    Loading AI Models...
                </h3>
                <div class="w-full bg-gray-200/50 rounded-full h-3 mb-6 overflow-hidden">
                    <div id="loadingProgress"
                        class="h-3 rounded-full transition-all duration-500 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"
                        style="width: 0%"></div>
                </div>
                <p id="loadingStatus" class="text-gray-600 text-lg font-medium">Initializing neural networks...</p>
                <div class="mt-8 grid grid-cols-3 gap-4">
                    <div class="bg-blue-50/50 backdrop-blur-sm rounded-lg p-4 border border-blue-200/50">
                        <div class="w-8 h-8 bg-blue-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                            </svg>
                        </div>
                        <p class="text-sm font-medium text-blue-700">Face Detection</p>
                    </div>
                    <div class="bg-purple-50/50 backdrop-blur-sm rounded-lg p-4 border border-purple-200/50">
                        <div class="w-8 h-8 bg-purple-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                            </svg>
                        </div>
                        <p class="text-sm font-medium text-purple-700">Emotion Analysis</p>
                    </div>
                    <div class="bg-pink-50/50 backdrop-blur-sm rounded-lg p-4 border border-pink-200/50">
                        <div class="w-8 h-8 bg-pink-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7.01 5 5 7.01 5 9.5S7.01 14 9.5 14 14 11.99 14 9.5 11.99 5 9.5 5Z" />
                            </svg>
                        </div>
                        <p class="text-sm font-medium text-pink-700">Skin Analysis</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main App -->
        <div id="mainApp" class="hidden">
            <div class="grid grid-cols-1 xl:grid-cols-4 gap-8">
                <!-- Camera Section -->
                <div class="xl:col-span-2">
                    <div class="card p-8 h-full">
                        <div class="flex justify-between items-center mb-8">
                            <div class="flex items-center space-x-4">
                                <div class="relative">
                                    <div
                                        class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M17 10.5V7a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h12a1 1 0 001-1v-3.5l4 2v-7l-4 2z" />
                                        </svg>
                                    </div>
                                    <div
                                        class="absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white animate-pulse">
                                    </div>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-gray-800">Camera Feed</h2>
                                    <p class="text-gray-600 font-medium">Real-time AI analysis</p>
                                </div>
                            </div>
                            <div class="flex space-x-3">
                                <button id="startButton" class="btn-primary flex items-center space-x-2">
                                    <i class="fas fa-play"></i>
                                    <span>Start Analysis</span>
                                </button>
                                <button id="stopButton" class="btn-secondary flex items-center space-x-2 hidden">
                                    <i class="fas fa-stop"></i>
                                    <span>Stop</span>
                                </button>
                            </div>
                        </div>

                        <!-- Fixed size video container to prevent layout shifts -->
                        <div class="video-container mx-auto relative"
                            style="width: 640px; height: 480px; max-width: 100%;">
                            <video id="video" width="640" height="480" autoplay muted
                                class="w-full h-full object-cover rounded-2xl"></video>
                            <canvas id="overlay" class="overlay-canvas w-full h-full"></canvas>

                            <!-- Enhanced detection overlays -->
                            <div id="detectionOverlay" class="absolute inset-0 pointer-events-none">
                                <!-- Face detection zone indicator -->
                                <div id="faceZone"
                                    class="absolute inset-8 border-2 border-dashed border-cyan-400/60 rounded-2xl hidden">
                                    <div
                                        class="absolute -top-6 left-1/2 transform -translate-x-1/2 bg-cyan-500/90 text-white px-3 py-1 rounded-full text-xs font-medium backdrop-blur-sm">
                                        Position face here
                                    </div>
                                </div>

                                <!-- Detection status indicators -->
                                <div
                                    class="absolute top-4 left-4 bg-gradient-to-r from-red-500 to-pink-500 text-white px-3 py-2 rounded-lg text-sm font-semibold flex items-center space-x-2 shadow-lg">
                                    <div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>
                                    <span>LIVE</span>
                                </div>

                                <div id="aiStatus"
                                    class="absolute top-4 right-4 bg-black/20 backdrop-blur-sm text-white px-3 py-2 rounded-lg text-sm font-medium hidden">
                                    <i class="fas fa-robot mr-2"></i>AI Active
                                </div>

                                <!-- Face detection confidence indicator -->
                                <div id="confidenceIndicator"
                                    class="absolute bottom-4 left-4 bg-black/70 backdrop-blur-sm text-white px-3 py-2 rounded-lg text-xs font-medium hidden">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                        <span id="confidenceText">Detecting...</span>
                                    </div>
                                </div>

                                <!-- Detection quality indicator -->
                                <div id="qualityIndicator"
                                    class="absolute bottom-4 right-4 bg-black/70 backdrop-blur-sm text-white px-3 py-2 rounded-lg text-xs font-medium hidden">
                                    <div class="flex items-center space-x-2">
                                        <div id="qualityDot" class="w-2 h-2 bg-yellow-400 rounded-full"></div>
                                        <span id="qualityText">Analyzing...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="cameraStatus" class="mt-6 text-center"></div>
                    </div>
                </div>

                <!-- Analysis Dashboard -->
                <div class="xl:col-span-2 space-y-6">
                    <!-- Mood Analysis -->
                    <div class="card p-8">
                        <div class="flex items-center space-x-4 mb-8">
                            <div class="relative">
                                <div
                                    class="w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                        <circle cx="9" cy="9" r="1.5" />
                                        <circle cx="15" cy="9" r="1.5" />
                                        <path d="M8.5 14.5c0 1.93 1.57 3.5 3.5 3.5s3.5-1.57 3.5-3.5" />
                                    </svg>
                                </div>
                                <div
                                    class="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-pink-400 to-red-400 rounded-full border-2 border-white">
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Mood Analysis</h3>
                                <p class="text-gray-600 font-medium">Real-time emotion detection</p>
                            </div>
                        </div>

                        <div id="moodResults" class="space-y-4">
                            <div class="text-center text-gray-500 py-12">
                                <div class="relative w-20 h-20 mx-auto mb-6">
                                    <div
                                        class="absolute inset-0 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full blur-lg opacity-60 animate-pulse">
                                    </div>
                                    <div
                                        class="relative w-20 h-20 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-xl">
                                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                        </svg>
                                    </div>
                                </div>
                                <h4 class="text-xl font-bold text-gray-700 mb-3">Ready for Analysis</h4>
                                <p class="text-gray-600 font-medium">Position your face in the camera to start emotion
                                    detection</p>
                            </div>
                        </div>

                        <div id="moodIndicators" class="hidden grid grid-cols-3 gap-4 mt-8">
                            <div class="mood-indicator text-center p-4 rounded-xl transition-all cursor-pointer"
                                data-mood="happy">
                                <div class="text-3xl mb-2">😊</div>
                                <div class="text-sm font-semibold text-gray-700 mb-1">Happy</div>
                                <div class="mood-score text-lg font-bold text-green-600">0%</div>
                            </div>
                            <div class="mood-indicator text-center p-4 rounded-xl transition-all cursor-pointer"
                                data-mood="sad">
                                <div class="text-3xl mb-2">😢</div>
                                <div class="text-sm font-semibold text-gray-700 mb-1">Sad</div>
                                <div class="mood-score text-lg font-bold text-blue-600">0%</div>
                            </div>
                            <div class="mood-indicator text-center p-4 rounded-xl transition-all cursor-pointer"
                                data-mood="angry">
                                <div class="text-3xl mb-2">😠</div>
                                <div class="text-sm font-semibold text-gray-700 mb-1">Angry</div>
                                <div class="mood-score text-lg font-bold text-red-600">0%</div>
                            </div>
                            <div class="mood-indicator text-center p-4 rounded-xl transition-all cursor-pointer"
                                data-mood="surprised">
                                <div class="text-3xl mb-2">😲</div>
                                <div class="text-sm font-semibold text-gray-700 mb-1">Surprised</div>
                                <div class="mood-score text-lg font-bold text-yellow-600">0%</div>
                            </div>
                            <div class="mood-indicator text-center p-4 rounded-xl transition-all cursor-pointer"
                                data-mood="neutral">
                                <div class="text-3xl mb-2">😐</div>
                                <div class="text-sm font-semibold text-gray-700 mb-1">Neutral</div>
                                <div class="mood-score text-lg font-bold text-gray-600">0%</div>
                            </div>
                            <div class="mood-indicator text-center p-4 rounded-xl transition-all cursor-pointer"
                                data-mood="disgusted">
                                <div class="text-3xl mb-2">🤢</div>
                                <div class="text-sm font-semibold text-gray-700 mb-1">Disgusted</div>
                                <div class="mood-score text-lg font-bold text-purple-600">0%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Skin Analysis -->
                    <div class="card p-8">
                        <div class="flex items-center space-x-4 mb-8">
                            <div class="relative">
                                <div
                                    class="w-12 h-12 bg-gradient-to-r from-pink-500 to-rose-500 rounded-xl flex items-center justify-center shadow-lg">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path
                                            d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7.01 5 5 7.01 5 9.5S7.01 14 9.5 14 14 11.99 14 9.5 11.99 5 9.5 5Z" />
                                    </svg>
                                </div>
                                <div
                                    class="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full border-2 border-white">
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Skin Analysis</h3>
                                <p class="text-gray-600 font-medium">Advanced health metrics</p>
                            </div>
                        </div>

                        <div id="skinResults" class="space-y-6">
                            <div class="skin-metric">
                                <div class="flex justify-between items-center mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div
                                            class="w-10 h-10 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-tint text-white"></i>
                                        </div>
                                        <span class="font-bold text-gray-800 text-lg">Hydration</span>
                                    </div>
                                    <span id="hydrationLevel" class="text-2xl font-bold text-blue-600">--</span>
                                </div>
                                <div class="metric-bar">
                                    <div id="hydrationBar"
                                        class="h-full rounded-full progress-bar bg-gradient-to-r from-blue-400 to-cyan-500"
                                        style="width: 0%"></div>
                                </div>
                            </div>

                            <div class="skin-metric">
                                <div class="flex justify-between items-center mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div
                                            class="w-10 h-10 bg-gradient-to-r from-emerald-400 to-green-500 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-gem text-white"></i>
                                        </div>
                                        <span class="font-bold text-gray-800 text-lg">Smoothness</span>
                                    </div>
                                    <span id="smoothnessLevel" class="text-2xl font-bold text-emerald-600">--</span>
                                </div>
                                <div class="metric-bar">
                                    <div id="smoothnessBar"
                                        class="h-full rounded-full progress-bar bg-gradient-to-r from-emerald-400 to-green-500"
                                        style="width: 0%"></div>
                                </div>
                            </div>

                            <div class="skin-metric">
                                <div class="flex justify-between items-center mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div
                                            class="w-10 h-10 bg-gradient-to-r from-red-400 to-rose-500 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-exclamation-triangle text-white"></i>
                                        </div>
                                        <span class="font-bold text-gray-800 text-lg">Redness</span>
                                    </div>
                                    <span id="rednessLevel" class="text-2xl font-bold text-red-600">--</span>
                                </div>
                                <div class="metric-bar">
                                    <div id="rednessBar"
                                        class="h-full rounded-full progress-bar bg-gradient-to-r from-red-400 to-rose-500"
                                        style="width: 0%"></div>
                                </div>
                            </div>

                            <div class="skin-metric">
                                <div class="flex justify-between items-center mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div
                                            class="w-10 h-10 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-oil-can text-white"></i>
                                        </div>
                                        <span class="font-bold text-gray-800 text-lg">Oil Level</span>
                                    </div>
                                    <span id="oilLevel" class="text-2xl font-bold text-amber-600">--</span>
                                </div>
                                <div class="metric-bar">
                                    <div id="oilBar"
                                        class="h-full rounded-full progress-bar bg-gradient-to-r from-amber-400 to-yellow-500"
                                        style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div class="card p-8">
                        <div class="flex justify-between items-center mb-8">
                            <div class="flex items-center space-x-4">
                                <div class="relative">
                                    <div
                                        class="w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" />
                                        </svg>
                                    </div>
                                    <div
                                        class="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-green-400 to-emerald-400 rounded-full border-2 border-white">
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Analysis Report</h3>
                                    <p class="text-gray-600 font-medium">Personalized recommendations</p>
                                </div>
                            </div>
                            <button id="downloadReport" class="hidden btn-primary flex items-center space-x-2">
                                <i class="fas fa-download"></i>
                                <span>Download Report</span>
                            </button>
                        </div>
                        <div id="recommendations" class="space-y-6">
                            <div class="text-center text-gray-500 py-16">
                                <div class="relative w-24 h-24 mx-auto mb-8">
                                    <div
                                        class="absolute inset-0 bg-gradient-to-r from-indigo-400 via-purple-500 to-pink-500 rounded-full blur-lg opacity-60 animate-pulse">
                                    </div>
                                    <div
                                        class="relative w-24 h-24 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full flex items-center justify-center shadow-2xl">
                                        <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                                        </svg>
                                    </div>
                                </div>
                                <h4 class="text-2xl font-bold text-gray-700 mb-4">Ready for Analysis</h4>
                                <p class="text-lg text-gray-600 font-medium max-w-md mx-auto leading-relaxed">Start
                                    camera analysis to generate your personalized wellness report with AI-powered
                                    insights</p>
                                <div
                                    class="mt-6 inline-flex items-center space-x-2 bg-gradient-to-r from-indigo-50 to-purple-50 px-4 py-2 rounded-full border border-indigo-200">
                                    <div class="w-2 h-2 bg-indigo-500 rounded-full animate-pulse"></div>
                                    <span class="text-indigo-700 text-sm font-medium">Waiting for analysis...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Message -->
        <div id="errorMessage" class="hidden fixed top-6 right-6 z-50 max-w-md">
            <div
                class="bg-gradient-to-r from-red-500 to-rose-600 text-white px-6 py-4 rounded-2xl shadow-2xl border border-red-400/20 backdrop-blur-sm">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-exclamation-triangle text-white"></i>
                    </div>
                    <div>
                        <strong class="block text-sm font-bold">Error</strong>
                        <span id="errorText" class="text-sm font-medium"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'96ea65bc861f9d7c',t:'MTc1NTExMTAxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>